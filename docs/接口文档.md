# 接口文档

## 用户

### 登录 login

前端：

```json
{
   "username":"root",
   "password":"root"
}
```

后端：

```json
{
    "status": 0,
    "msg": "登录成功！",
    "data": {
        "userId": 1,
        "userType": 0,
        "username": "root"
    }
}
```

### /register

前端：

```json
{
   "username":"user",
   "password":"user",
   "phone":1
}
```

后端：

```json
{
    "status": -102,
    "msg": "存在相同用户名，请更换用户名",
    "data": null
}
```

或者

```json
{
    "status": 0,
    "msg": "注册成功",
    "data": null
}
```

### /logout

前端：无

后端：

```json
{
    "status": 0,
    "msg": "登出成功！",
    "data": null
}
```

### /checkSession

前端：无

后端：

```json
{
    "status": 0,
    "msg": "登录成功！",
    "data": {
        "userId": 1,
        "username": "root",
        "userType": 0
    }
}
```

### /getOrdersByUserId

前端：

```json
{
    "userId":1
}
```

后端：

```json
[
    {
        "orderId": 1,
        "userId": 1,
        "goodsDetail": {
            "detailId": 430,
            "goodsId": 120,
            "price": 80.0,
            "surplus": 1,
            "time": "2020-07-09 周四 21:00",
            "ticketType": "80元（预售票）",
            "image": null
        },
        "sourceId": 10001001,
        "number": 1,
        "price": 188.0,
        "time": "2020-07-08 14:51:42"
    }
]
```

## 商品

### /getGoodsByGoodsId

前端：

```json
{
    "goodsId":120
}
```

后端：

```json
{
    "status": 0,
    "msg": "成功！",
    "data": {
        "address": "场馆：上海市 | 生活实验室小剧场",
        "endTime": "2020-07-18",
        "goodsDetails": [
            {
                "detailId": 434,
                "goodsId": 123,
                "price": 150.0,
                "surplus": 0,
                "ticketType": "150元",
                "time": "2020-07-10 周五 19:30"
            }
        ],
        "goodsId": 123,
        "goodsType": 0,
        "image": "//img.alicdn.com/bao/uploaded/https://img.alicdn.com/imgextra/i2/2251059038/O1CN019OYN192GdSFNbmN3f_!!2251059038.png_q60.jpg_.webp",
        "name": "【上海】爆笑脱口秀演出-喜剧联盒国",
        "startTime": "2020-07-10",
        "website": "https://detail.damai.cn/item.htm?id=619943654186&clicktitle=%E7%88%86%E7%AC%91%E8%84%B1%E5%8F%A3%E7%A7%80%E6%BC%94%E5%87%BA-%E5%96%9C%E5%89%A7%E8%81%94%E7%9B%92%E5%9B%BD"
    }
}
```

### /getAllGoods

前端：无

后端：好像出了点问题，我测试一下

```json
[
    {
        "goodsId": 120,
        "name": "【上海】皇后乐队致敬音乐会 2020 全新乐章",
        "startTime": "2020-07-09",
        "endTime": "2020-07-11",
        "address": "场馆：上海市 | 珍珠剧场The Pearl",
        "website": "https://detail.damai.cn/item.htm?id=621046144219&clicktitle=%E7%9A%87%E5%90%8E%E4%B9%90%E9%98%9F%E8%87%B4%E6%95%AC%E9%9F%B3%E4%B9%90%E4%BC%9A%202020%20%E5%85%A8%E6%96%B0%E4%B9%90%E7%AB%A0",
        "goodsType": 0,
        "image": "//img.alicdn.com/bao/uploaded/i1/2251059038/O1CN019kybVQ2GdSFbIQCPL_!!0-item_pic.jpg_q60.jpg_.webp",
        "goodsDetails": [
            {
                "detailId": 430,
                "goodsId": 120,
                "price": 80.0,
                "surplus": 1,
                "time": "2020-07-09 周四 21:00",
                "ticketType": "80元（预售票）"
            }
        ]
    },
    {
        "goodsId": 121,
        "name": "【杭州】「初夏人生」嘻哈派对",
        "startTime": "2020-08-07 00:00:00",
        "endTime": "2020-08-07 00:00:00",
        "address": "场馆：杭州市 | 大麦66LiveHouse杭州",
        "website": "https://detail.damai.cn/item.htm?id=621634938771&clicktitle=%E3%80%8C%E5%88%9D%E5%A4%8F%E4%BA%BA%E7%94%9F%E3%80%8D%E5%98%BB%E5%93%88%E6%B4%BE%E5%AF%B9",
        "goodsType": 0,
        "image": "//img.alicdn.com/bao/uploaded/i3/2251059038/O1CN01RNXESo2GdSFYachKn_!!2-item_pic.png_q60.jpg_.webp",
        "goodsDetails": [
            {
                "detailId": 431,
                "goodsId": 121,
                "price": 188.0,
                "surplus": 1,
                "time": "2020-08-07 星期五 20:00",
                "ticketType": "预售票（188.00）"
            }
        ]
    },
]
```

### /getGoodsByGoodsType

前端：

```json
{
    "goodsType":0
}
```

后端: 出了点问题，我测试一下

```json
[
    {
        "goodsId": 120,
        "name": "【上海】皇后乐队致敬音乐会 2020 全新乐章",
        "startTime": "2020-07-09",
        "endTime": "2020-07-11",
        "address": "场馆：上海市 | 珍珠剧场The Pearl",
        "website": "https://detail.damai.cn/item.htm?id=621046144219&clicktitle=%E7%9A%87%E5%90%8E%E4%B9%90%E9%98%9F%E8%87%B4%E6%95%AC%E9%9F%B3%E4%B9%90%E4%BC%9A%202020%20%E5%85%A8%E6%96%B0%E4%B9%90%E7%AB%A0",
        "goodsType": 0,
        "image": "//img.alicdn.com/bao/uploaded/i1/2251059038/O1CN019kybVQ2GdSFbIQCPL_!!0-item_pic.jpg_q60.jpg_.webp",
        "goodsDetails": [
            {
                "detailId": 430,
                "goodsId": 120,
                "price": 80.0,
                "surplus": 1,
                "time": "2020-07-09 周四 21:00",
                "ticketType": "80元（预售票）"
            }
        ]
    },
    {
        "goodsId": 121,
        "name": "【杭州】「初夏人生」嘻哈派对",
        "startTime": "2020-08-07 00:00:00",
        "endTime": "2020-08-07 00:00:00",
        "address": "场馆：杭州市 | 大麦66LiveHouse杭州",
        "website": "https://detail.damai.cn/item.htm?id=621634938771&clicktitle=%E3%80%8C%E5%88%9D%E5%A4%8F%E4%BA%BA%E7%94%9F%E3%80%8D%E5%98%BB%E5%93%88%E6%B4%BE%E5%AF%B9",
        "goodsType": 0,
        "image": "//img.alicdn.com/bao/uploaded/i3/2251059038/O1CN01RNXESo2GdSFYachKn_!!2-item_pic.png_q60.jpg_.webp",
        "goodsDetails": [
            {
                "detailId": 431,
                "goodsId": 121,
                "price": 188.0,
                "surplus": 1,
                "time": "2020-08-07 星期五 20:00",
                "ticketType": "预售票（188.00）"
            }
        ]
    },
]
```

### /addOrder

前端：

```json
{
    "userId":"1",
    "detailId":"8897",
    "number":"2"
}
```

后端

```json
{
    "status": 0,
    "msg": "购买成功",
    "data": {
        "goods": {
            "address": "场馆：济南市 | 济南江湖艺社",
            "endTime": "2020-08-17",
            "goodsDetails": [
                {
                    "detailId": 8893,
                    "goodsId": 1789,
                    "price": 60.0,
                    "surplus": 1,
                    "ticketType": "60元",
                    "time": "2020-07-11 周六 14:30相声专场"
                },
                {
                    "detailId": 8894,
                    "goodsId": 1789,
                    "price": 80.0,
                    "surplus": 1,
                    "ticketType": "80元",
                    "time": "2020-07-11 周六 14:30相声专场"
                },
                {
                    "detailId": 8895,
                    "goodsId": 1789,
                    "price": 100.0,
                    "surplus": 1,
                    "ticketType": "100元",
                    "time": "2020-07-11 周六 14:30相声专场"
                },
                {
                    "detailId": 8896,
                    "goodsId": 1789,
                    "price": 198.0,
                    "surplus": 0,
                    "ticketType": "VIP198元",
                    "time": "2020-07-11 周六 14:30相声专场"
                },
                {
                    "detailId": 8897,
                    "goodsId": 1789,
                    "price": 888.0,
                    "surplus": 1,
                    "ticketType": "套票888元（8人包厢）",
                    "time": "2020-07-11 周六 14:30相声专场"
                },
                {
                    "detailId": 8898,
                    "goodsId": 1789,
                    "price": 400.0,
                    "surplus": 1,
                    "ticketType": "套票400元",
                    "time": "2020-07-11 周六 14:30相声专场"
                },
                {
                    "detailId": 8899,
                    "goodsId": 1789,
                    "price": 60.0,
                    "surplus": 1,
                    "ticketType": "60元",
                    "time": "2020-07-11 周六 19:30相声专场"
                },
                {
                    "detailId": 8900,
                    "goodsId": 1789,
                    "price": 80.0,
                    "surplus": 1,
                    "ticketType": "80元",
                    "time": "2020-07-11 周六 19:30相声专场"
                },
                {
                    "detailId": 8901,
                    "goodsId": 1789,
                    "price": 100.0,
                    "surplus": 1,
                    "ticketType": "100元",
                    "time": "2020-07-11 周六 19:30相声专场"
                },
                {
                    "detailId": 8902,
                    "goodsId": 1789,
                    "price": 888.0,
                    "surplus": 1,
                    "ticketType": "套票888元（8人包厢）",
                    "time": "2020-07-11 周六 19:30相声专场"
                },
                {
                    "detailId": 8903,
                    "goodsId": 1789,
                    "price": 400.0,
                    "surplus": 1,
                    "ticketType": "套票400元",
                    "time": "2020-07-11 周六 19:30相声专场"
                }
            ],
            "goodsId": 1789,
            "goodsType": 5,
            "image": "//img.alicdn.com/bao/uploaded/i4/2251059038/O1CN01rKprgn2GdSEzIsRO7_!!0-item_pic.jpg_q60.jpg_.webp",
            "name": "【济南】济南江湖艺社曲艺演出",
            "startTime": "2020-07-09",
            "website": "https://detail.damai.cn/item.htm?id=615294466590&clicktitle=%E6%B5%8E%E5%8D%97%E6%B1%9F%E6%B9%96%E8%89%BA%E7%A4%BE%E6%9B%B2%E8%89%BA%E6%BC%94%E5%87%BA"
        },
        "goodsDetail": {
            "detailId": 8897,
            "goodsId": 1789,
            "price": 888.0,
            "surplus": 1,
            "ticketType": "套票888元（8人包厢）",
            "time": "2020-07-11 周六 14:30相声专场"
        },
        "number": 2,
        "orderId": 5,
        "price": 1776.0,
        "sourceId": 54749110,
        "time": {
            "date": 10,
            "day": 5,
            "hours": 17,
            "minutes": 5,
            "month": 6,
            "nanos": 919000000,
            "seconds": 39,
            "time": 1594371939919,
            "timezoneOffset": -480,
            "year": 120
        },
        "userId": 1
    }
}
```

