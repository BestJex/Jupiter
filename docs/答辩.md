助教：你们redis 是用于persistance storage吗？

蓝浩宁：不，我们不是做持久化储存用的。我们是用户登陆的时候需要看到他的权限，我们会把用户的信息存储在数据库里面，当把他们拿出来的时候会比较好拿一点。就是sso单点登录中心，当登陆的时候用户发来请求，我们会先到mysql数据库里获取用户信息，包括用户名和密码。当他验证正确，会把数据存在redis方便下次读取。

助教：你们有什么淘汰的策略吗？

邓诗羿：淘汰的策略，我们设置了时间，十分钟后会自动失效。

助教：是用redis实现的吗？

邓诗羿：对

助教：你们考虑过容错处理吗？比如说数据库在运行的时候炸了，所有用户信息就没了。

邓诗羿：那意思是要放两个redis数据库，一个炸了另一个可以马上接上是这个意思吗？

助教：你要把信息写到磁盘上，这样才能永久保存。

邓诗羿：我们的考虑是这样的，redis是存在内存中，用户访问的时候速度比较快。因为用户登陆的话，每操作一个界面都会有一次check session。

任锐：数据要保存在硬盘上。

蓝浩宁：我们的数据并不需要持久化储存。

邓诗羿：我们只是保存了一些临时的凭据之类的

任锐：其他地方就没有需要缓存的东西了吗？

蓝浩宁：其他地方基本没有了

邓诗羿：我们是做多微服务，需要对session进行管理，才想到redis数据库，所以只拿它用来这个。

助教:当前价格刷新是怎么实现的？

蓝浩宁：是不断向后端发请求。

助教：是每隔一段时间向后端发请求吗？

蓝浩宁：对

助教：你们有考虑多个用户的情况吗？

蓝浩宁：多个用户我们没有进行测试，我们认为最好的结果是每次后端刷新就向前端发送请求，但是我们没有找到比较好的方法。

助教：这是一个很好的解决办法。我看你们使用了docker compose是吧，可是我看感觉你们只布置在了一个节点上。

邓诗羿：我们手上只有一台EC2，所以没进行多个物理节点的部署。

任锐：竞拍和上一组是一样的问题。

（窃窃私语）

助教：再回到压力测试

（窃窃私语）

助教：你没觉得这个曲线很诡异吗，突然到达最高点然后开始下滑。

邓诗羿：突然之间上升，我们只能猜测，但是没有什么监测的方法。

任锐：你们不是有sky working吗。

蓝浩宁：可以链路追踪。

任锐：对，每个环节都可以进行监控。

蓝浩宁：多个并发我需要把东西都看一遍吗？

任锐：所以说要找啊。第一你需要去确定每一个api都需要进行哪些操作，链路追踪后就可以得到大致的之间。

助教：你可以多做几次实验，看看是不是每次都有这种现象，看一看是不是一个一定会发生的问题。第一个点比第二个点低就很怪。

蓝浩宁：我们猜测是刚启动的原因。

任锐：一般刚启动不应该很慢吗？

蓝浩宁：jmeter实现机制不是100个并发全部下去，而是一百个并发慢慢地，有一个增长趋势。

任锐：所以说你们要多发一些请求。好多组都是只发100个请求，你应该发个几万，让他一直别停。

助教：你应该删除一些有影响的数据，给我们看到后边的数据。

任锐：一直发到稳定后再给我们看。

助教：比如启动之后的一些不正常数据就可以不拿出来

任锐：行，可以了。